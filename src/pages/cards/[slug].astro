---
import Layout from '../../layouts/Layout.astro';
import BenefitsList from '../../components/BenefitsList.astro';
import { getCreditCardBySlug, getCreditCards } from '../../lib/contentful/queries/creditCard';
import type { GetStaticPaths } from 'astro';

export const getStaticPaths = (async () => {
  const cards = await getCreditCards();
  return cards.map(card => ({
    params: { slug: card.fields.slug },
  }));
}) satisfies GetStaticPaths;

const { slug } = Astro.params;
const card = await getCreditCardBySlug(slug);

if (!card) {
  return Astro.redirect('/404');
}
---

<Layout title={card.fields.nombre}>
  <main class="min-h-screen bg-gray-50">
    <div class="container mx-auto px-4 py-16">
      <a href="/" class="text-blue-600 hover:text-blue-800 mb-8 inline-block">
        ‚Üê Volver a la lista
      </a>
      
      <div class="bg-white rounded-lg shadow-md p-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-4">
          {card.fields.nombre}
        </h1>
        
        <div class="mb-8">
          <h2 class="text-xl font-semibold text-gray-700 mb-2">
            Entidad Bancaria
          </h2>
          <p class="text-gray-600">
            {card.fields.entidadBancaria.fields.nombreBanco}
          </p>
        </div>

        <div>
          <h2 class="text-xl font-semibold text-gray-700 mb-4">
            Beneficios
          </h2>
          <BenefitsList benefits={card.fields.beneficios} />
        </div>
      </div>
    </div>
  </main>
</Layout>